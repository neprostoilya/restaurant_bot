{% extends 'base.html' %}
{% load static %}

{% load static %} 
{% block title %} 
{{ title }} 
{% endblock title %}

{% block main %}
<div class="HeaderWrapper">
	<button class="BackButton" style="background: transparent; top: 40px; left: 20px; box-shadow: none;">
		<span style="box-sizing: border-box; display: inline-block; overflow: hidden; width: initial; height: initial; background: none; opacity: 1; border: 0px; margin: 0px; padding: 0px; position: relative; max-width: 100%;">
			<span style="box-sizing: border-box; display: block; width: initial; height: initial; background: none; opacity: 1; border: 0px; margin: 0px; padding: 0px; max-width: 100%;">
			</span>
      <a href="{% url 'frontend:events_and_dishes_view' token %}"><i class="fa-solid fa-chevron-left fa-lg"></i></a>
		</span>
	</button>   
	<h1>Корзина</h1>
	<div class="HeaderNone"><div style="width: 48px; height: 48px;"></div></div>
</div>
{% for cart in carts %}
<div class="CartBlockWrapper_{{ cart.dish }}">
	<div class="CartBlockInfo">
		<div class="CartBlockImg">
			<span style="    
			box-sizing: border-box;
			display: block;
			overflow: hidden;
			height: 100px;
			background: none;
			opacity: 1;
			border: 0px;
			margin: -2px;
			padding: 0px;
			position: absolute; 
			inset: 1px;
			">
                <img src="{{ cart.get_dish_image }}" style="width: 90px; height: 90px;" >
			</span>
		</div>
		<div>
			<h3 class="CartBlockTitle">{{ cart.get_dish_title }}</h3>
		</div>
	</div>
	<div class="CartBlockCounterWrapper">
		<div class="CartBlockCounter" style="margin: 0px 0px 8px;">
			<div>
				<input type="hidden" name="dish" value="{{ cart.get_dish_pk }}">
				<input type="hidden" name="cart_pk" value="{{ cart.pk }}">
				<input type="hidden" name="user" value="{{ user }}">
				<input type="hidden" name="num" value="-1">
				<button type="submit" class="CartBlockCounterMinus"><span><i class="fa-solid fa-minus"></i></span></a>
			</div>
			<p class="CartBlockCounterQuantity_{{ cart.dish }}">{{ cart.quantity }}</p>	
			<div>
				<input type="hidden" name="dish" value="{{ cart.get_dish_pk }}">
				<input type="hidden" name="cart_pk" value="{{ cart.pk }}">
				<input type="hidden" name="user" value="{{ user }}">
				<input type="hidden" name="num" value="1">
				<div type="submit" class="CartBlockCounterPlus"><span><i class="fa-solid fa-plus"></i></span></div>
			</div>
		</div>
		<p class="CartBlockCounterPrice_{{ cart.dish }}">{{ cart.get_total_price }} сум</p>
	</div>
</div>
{% endfor %}

<div>
	<div class="TextBlockWrapper">
		<div class="TextWrapper TextTotalPrice">
			<p class="TextTotalPriceP">К оплате {{ total_price_all_cart_user }} сум</p>
		</div>
	</div>
	<a href="{% url 'frontend:select_time_view' token %}">
		<div class="ButtonBlockWrapper">
			<button class="ButtonWrapper" style="margin: 0px; width: 100%;">
				<div class="ButtonWrapperDiv"><p class="TextButtonWrapper TextButtonWrapperP">Заказать</p></div>
			</button>
		</div>
	</a>
</div>
	
<script>
	var createCartUrl = "{% url 'carts:create_cart' %}";
</script>
  
{% endblock main %}